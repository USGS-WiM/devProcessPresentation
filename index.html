<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Collaborative Dev Process</title>

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/moon.css">
	<link rel="stylesheet" href="css/main.css">

	<!-- <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/fontawesome.css"> -->

	<link href="node_modules/@fortawesome/fontawesome-pro/css/fontawesome.css" rel="stylesheet">
	<link href="node_modules/@fortawesome/fontawesome-pro/css/brands.css" rel="stylesheet">
	<link href="node_modules/@fortawesome/fontawesome-pro/css/solid.css" rel="stylesheet">
	<link href="node_modules/@fortawesome/fontawesome-pro/css/duotone.css" rel="stylesheet">

	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"> -->

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/monokai.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>

<body>
	<div class="reveal">
		<div class="slides">

			<section data-background-image="images/kanban.jpg" data-background-size="contain" data-state="dimbg2">

				<!-- <img data-src="images/logo_hor_fullres.png" alt="WIM logo"
					style="margin:30px;background:none;border:none;box-shadow:none;"> -->
				<br>
				<h3>A model for Collaborative Development</h3>
				<p>WIM's Development Process with Github</p>

				<p>
					<small>Streamstats Workshop 2020<br>Presented by <a
							href="https://www.linkedin.com/in/blakedraper/">Blake Draper</a>, Software
						Developer<br><a href="https://github.com/usgs-wim">USGS Web Informatics and Mapping
							(WIM)</a><br></small>
					<br>
					<!-- <img height="70" data-src="images/wim_hor_abbr_light.png" alt="WiM logo"
						style="margin:30px;background:none;border:none;box-shadow:none;"> -->
					<img data-src="images/logo_hor_fullres.png" alt="WIM logo"
						style="margin:30px;background:none;border:none;box-shadow:none;">
				</p>

			</section>


			<section>
				<h3>Overview</h3>

				<div class='multiCol'>
					<div class='col'>
						<ul>
							<!-- <li class="fragment">Set Up</li> -->
							<h4><i class="fa fa-box-open"></i> Set Up</h4>
							<ul class="fragment">
								<li>Core Branches</li>
								<li>Understanding local vs remote</li>
							</ul>
						</ul>
					</div>
					<div class='col'>
						<ul>
							<!-- <li class="fragment"> Doing the work</li> -->
							<h4><i class="fa fa-laptop-code"></i> Doing the work</h4>
							<ul class="fragment">
								<li>Issue Branches</li>
								<li>Issue Tracking</li>
								<li>Kanban Board</li>
							</ul>
						</ul>
					</div>
					<div class='col'>
						<ul>
							<!-- <li class="fragment">Putting it all together</li> -->
							<h4><i class="fa fa-file-code"></i> Releasing</h4>
							<ul class="fragment">
								<li>Pull Requests</li>
								<li>Semver Releases</li>
								<li>The core branches pipeline</li>
							</ul>
						</ul>
					</div>
				</div>


			</section>


			<section>
				<h2> <i class="fa fa-code-branch"></i> Setup: Core Branches</h2>

				<p>Branches help organize your development and keep it moving smoothly.</p>

				<h3>Categories of branches</h3>
				<ul>
					<li>Core branches (protect these)</li>
					<li>Issue branches (more on these later)</li>
					<li>Feature branches <span class="fragment font-25"> ← can be long term</span></li>
					<li class="text-italic" class="fragment">personal branches<span class="fragment font-25"> ← only for
							early
							dev</span>
					</li>
					<ul class="fragment font-25">
						<li>'blakedev', 'KJ_dev', 'setup'</li>
					</ul>
				</ul>
			</section>

			<section>
				<h2> <i class="fa fa-code-branch"></i> Setup: Establishing your Core branches</h2>
				<!-- <p>Core branch names can vary. Suggested setup:</p> -->
				<div class='multiCol'>
					<div class='col fragment'>
						<ul>
							<h4>master</h4>
							<div class="font-30">the branch that deploys to production</div>
							<ul>
								<li class="font-30">always promoted up from test branch</li>
								<li class="font-30">never direct commit - always after testing and approval</li>
							</ul>
						</ul>
					</div>
					<div class='col fragment'>
						<ul>
							<h4>test</h4>
							<div class="font-30">the branch that deploys to the test site</div>
							<ul>
								<li class="font-30">always promoted up from dev</li>
							</ul>
						</ul>
					</div>
					<div class='col fragment'>
						<ul>
							<h4>dev</h4>
							<li>
								<div class="font-30">the branch where all the work comes together</div>
							</li>
							<ul>
								<li class="font-30">never direct commit - always via a Pull Request</li>
							</ul>
						</ul>

					</div>
				</div>
				<div class='multiCol font-25 fragment'>
					<p>Optional: A <span class="text-italic">staging</span> branch between test and master</p>
				</div>
			</section>

			<section>
				<h3> <i class="fas fa-laptop"></i> Setup: Understanding local vs. remote <i class="fa fa-cloud"></i>
				</h3>
				<ul class="font-30">
					<li>
						'local' refers to your computer, where you are writing code
					</li>
					<li>
						'remote' refers to the cloud-based repository, i.e. Github
					</li>
				</ul>
				<p class="font-30">IMPORTANT:&nbsp;&nbsp; <i class="fab fa-git"></i> and Github <i
						class="fab fa-github"></i> are
					not the same!</p>
				<p class="font-30">You can and will do things using git that only affect files on your computer.</p>
				<span class="font-30">Commands such as </span>
				<pre><code class="hljs console">git add .</code> or  <code  class="hljs console">git commit -m "fixes issue #135"</code></pre>
				<span class="font-30">affect your local files and your local Git registry</span>


			</section>

			<section>
				<h3> <i class="fas fa-laptop"></i> Setup: Understanding local vs. remote <i class="fa fa-cloud"></i>
					(continued)
				</h3>
				<span>Commands such as </span>
				<pre><code class="hljs console">git pull origin dev</code> or  <code  class="hljs console">git push origin test</code></pre>
				<span>involve the remote repository </span><br>
				<span>the remote repository is often called 'origin'</span>
			</section>

			<section>
				<h3> <i class="fas fa-laptop"></i> <i class="fa fa-cloud"></i> Setup: Understanding local vs. remote
					(continued)</h3>
				<p class="font-30"> to see what your remote repository
					names are:</p><code class="hljs console">git remote -v</code>
				<img data-src="images/gitRemote.JPG" alt="git remote -v command">
				<p class="font-30">You can name the remote anything you want! <br> That name is local only to the Git
					registry on your computer.<br>
					"Origin" is a convention.</p>
			</section>

			<section>
				<h3> <i class="fa fa-clipboard"></i> Issues</h3>
				<p>Issues are how we track bugs, feature requests, questions, etc. during the development cycle.</p>
				<img data-src="images/issues.JPG" alt="issues" height="350px">
				<p class="font-30">Created by developers, testers, cooperators</p>
			</section>

			<section>
				<h3> <i class="fa fa-clipboard"></i> Issues (continued)</h3>

				<p>Give it a short but descriptive title</p>
				<p>Include details and/or images if neccesary</p>
				<img data-src="images/issueCreate.JPG" alt="issues" height="350px">
			</section>

			<section>
				<h3><i class="fa fa-clipboard"></i> Issues (continued)</h3>
				<div class='multiCol'>
					<div class='col'>
						<img data-src="images/issueExample1.JPG" alt="issues">
					</div>
					<div class='col'>
						<img data-src="images/issueExample2.JPG" alt="issues" height="500px">
					</div>
				</div>
			</section>

			<section>
				<h3> <i class="fa fa-clipboard"></i> Issues (continued)</h3>
				<div class='multiCol'>
					<div class='col'>
						<span class="font-30">Assignment</span><br>
						<img data-src="images/issueAssignment.JPG" alt="labels" height="350px">
						<br>
						<span class="font-25">Project Manager does initial assignment, or devs self-assign</span>
					</div>

					<div class='col'>
						<span class="font-30">Labels</span><br>
						<img data-src="images/issueLabels.JPG" alt="labels" height="350px">
						<br>
						<span class="font-25">Use labels to organize, categorize and filter your issues.</span>
					</div>
				</div>
			</section>

			<section>
				<h3> <i class="fab fa-trello"></i> Kanban Board</h3>
				<div class='multiCol'>
					<div class='col-narrow-left'>
						<ul>
							<li class="font-30">Columns to track status of each issue</li>
							<li class="font-30">PM or Lead Dev does initial triage</li>
							<li class="font-30">Issues start in To Do column</li>
							<li class="font-30"> Columns
								<ul>
									<li class="font-25">To do</li>
									<li class="font-25">Deferred</li>
									<li class="font-25">In Progress</li>
									<li class="font-25">In issue branch (needs review/merge)</li>
									<li class="font-25">Done (in dev branch)</li>
									<li class="font-25">Published in release (closed)</li>
								</ul>
							</li>
						</ul>
					</div>
					<div class='col-wide-right'>
						<img data-src="images/kanban.jpg" alt="labels">
					</div>
				</div>
			</section>

			<section>
				<h3> <i class="fab fa-trello"></i> Kanban Board (continued)</h3>
				<div class='multiCol'>
					<div class='col-narrow-left'>
						<ul>
							<li class="font-30">Move issues along the board to keep everyone informed</li>
							<li class="font-30">DONE IS NOT THE SAME AS CLOSED!</li>
							<li class="font-30">Only closed once published in a release the cooperator can see</li>
							<li class="font-30">May wish to have a ‘Done Locally’ label for when work is complete</li>
						</ul>
					</div>
					<div class='col-wide-right'>
						<img data-src="images/kanban.jpg" alt="labels">
					</div>
				</div>
			</section>

			<section>
				<h3> <i class="fa fa-laptop-code"></i> Working in Issue Branches</h3>
				<p class="font-25">Personal, or generic branches may be appropriate for early development:
					<br>'blakedev', 'KJ_dev',
					'setup'
				</p>
				<p class="font-25">But once the project is:</p>
				<ul class="font-25">
					<li>under development by multiple devs</li>
					<li>released to the client</li>
				</ul>
				<p class="font-25">best to use branches named for a specific issue number:
					<br>'137', '142_143'<br> This is a soft rule – it does not always work neatly - use your judgement!
				</p>

				<div class="font-25">Long-term feature branch:</div>
				<ul class="font-25">
					<li>for features developed in parallel to mainline dev</li>
					<li>Example: a notifications branch </li>
					<li>eventutally merged into dev</li>
				</ul>

			</section>

			<section>
				<h3> <i class="fa fa-laptop-code"></i> Working in Issue Branches (continued)</h3>
				<h4><i class="fab fa-github"></i> Guidelines for Git and Github use</h4>
				<ul>
					<li>Commit as often as you want</li>
					<li>Push at least end of each day for safekeeping</li>
					<li>Github is NOT a gallery, it is a repository</li>
				</ul>
			</section>

			<section>
				<h3> <i class="fa fa-laptop-code"></i> Working in Issue Branches (continued)</h3>
				<h4>Merging Your Work into Dev</h4>
				<p class="font-30">IMPORTANT: <span class="text-bold">pull in the dev branch from origin and merge
						locally</span> </p>
				<pre><code class="hljs console">git pull origin dev</code></pre>
				<p class="font-30">it is easier to merge locally than on Github </p>
				<p class="font-30">With your changes synced with current state of dev, the Pull Request will be easier
				</p>

			</section>

			<section>
				<h3> <i class="fa fa-code-merge"></i> Pull Requests</h3>
				<div class='multiCol'>
					<div class='col-narrow-left'>
						<p class="font-30">A Pull Request should be used to merge your work from a branch into dev</p>
						<ul>
							<li class="font-30">Direct push to dev is bad</li>
							<li class="font-30">Colleagues should review your commit</li>
							<li class="font-30">Even if you are developing solo, Pull Request is useful for the
								comparison view</li>
						</ul>
					</div>
					<div class='col-wide-right'>
						<img data-src="images/pullrequest.jpg" alt="Pull Request example" height="475px">
					</div>
				</div>
			</section>

			<section>
				<h3><i class="fa fa-code-merge"></i> Pull Requests (continued)</h3>
				<div class='multiCol'>
					<div class='col-narrow-left'>
						<div class="font-30">Request Reviewers for your Pull Request</div>
						<ul>
							<li class="font-25">Review should not be a rubber stamp </li>
							<li class="font-25">Reviewers should take a serious look at the changes</li>
							<li class="font-25">Reviewers can:
								<ul>
									<li>comment on lines</li>
									<li>request changes</li>
								</ul>
							</li>
						</ul>

						<img data-src="images/PRinline.JPG" alt="Pull Request inline comment" width="100%">

					</div>
					<div class='col-wide-right'>
						<img data-src="images/PRcomparo.JPG" alt="Pull Request comparison view">
					</div>
				</div>
				<div class='multiCol'>
					<ul>
						<li class="font-25">Additional commits will automatically update the PR - no need for a new one!
						</li>
						<li class="font-25">Note: be sure you are setting the PR to merge with dev.</li>
					</ul>
				</div>

			</section>

			<section>
				<h3> <i class="fa fa-code-merge"></i> Pull Requests (continued)</h3>
				<!-- <ul>
					<li class="font-25">Comment as needed</li>
					<li class="font-25">Approve and merge</li>
					<li class="font-25">After the PR is merged, delete the issue branch</li>
				</ul> -->

				<div class='multiCol'>
					<div class="col fragment">
						<figure>
							<img data-src="images/PRapprove.JPG" alt="Pull Request approve" height="200px">
							<figcaption class="font-25"><i class="fa fa-comment-alt"></i> Comment as needed, Approve
							</figcaption>
						</figure>
					</div>
					<div class="col fragment">
						<figure><img data-src="images/PRmerge.JPG" alt="Pull Request merge">
							<figcaption class="font-25"><i class="fa fa-code-merge"></i> Merge</figcaption>
						</figure>

					</div>


				</div>

				<div class='multiCol'>
					<div class="col fragment">
						<figure>
							<img data-src="images/PRconfirm.JPG" alt="Pull Request history">
							<figcaption class="font-25"><i class="fa fa-check"></i> Confirm</figcaption>
						</figure>
					</div>
					<div class="col fragment">
						<figure>
							<img data-src="images/PRdone.JPG" alt="Pull Request history">
							<figcaption class="font-25"><i class="fa fa-trash"></i> Delete Branch</figcaption>
						</figure>
					</div>


				</div>


			</section>

			<section>
				<h3> <i class="fa fa-code-merge"></i> Pull Requests (continued)</h3>
				<div class='multiCol'>
					<div class='col-wide-right'>
						<img data-src="images/PRhistory.JPG" alt="Pull Request history" height="500px;">
					</div>
					<div class='col-narrow-left'>
						<ul>
							<li class="font-30">A Pull Request keeps a useful record of the commit and merge</li>
							<li class="font-30">Always pull in dev to merge with your branch before pushing so this
								process is easy <i class="fa fa-smile"></i> </li>
						</ul>
					</div>
				</div>
			</section>

			<section>
				<h3><i class="fa fa-code-commit"></i> Releases</h3>
				<p class="font-30">
					We use the SemVer system for versioning releases
					<br><i class="fa fa-ellipsis-h"></i><br>
					Semver is short for <span class="text-italic">Semantic Versioning</span><br>
					Versions work on a Major|Minor|Patch basis:<br>
				</p>
				<span>major.minor.patch</span><br>
				<span>v1.4.2<span><br>
						<i class="fa fa-ellipsis-h"></i><br>
						<p>
							<ul>
								<li class="font-30">Major: major rewrite; breaking changes | Minor: new features |
									Patch: bug fixes</li>
								<li class="font-30">Releases are discretionary</li>
								<li class="font-30">Best to combine several issues into a release, but not a rule</li>
								<li class="font-30">Dictated by project needs and testing timeline</li>
								<li class="font-25">Visit <a href="https:/semver.org">semver.org</a> for more details
								</li>
							</ul>
						</p>

			</section>

			<section>
				<h3><i class="fa fa-code-commit"></i> Releases (continued)</h3>
				<div class='multiCol'>
					<div class="col-narrow-left">
						<ol>
							<li class="font-25">Combine work (completed issues) into a distinct release</li>
							<li class="font-25">Do a distribution build (if neccesary)</li>
							<li class="font-25">run git tag command to register a tag <code
									class="hljs console font-20">git tag v1.4.2</code></li>
							<li class="font-25">run command to push tag to remote <code
									class="hljs console font-20">git push origin --tags</code></li>
							<li class="font-25">Write a release tag describing what's included, using issue numbers when
								applicable <i class="fa fa-arrow-alt-right"></i></li>
						</ol>
					</div>
					<div class='col-wide-right'>
						<img data-src="images/release.JPG" alt="Pull Request history">
					</div>
				</div>

				<p></p>

			</section>

			<section>
				<h3><i class="fa fa-code-branch"></i> Moving Code through Core Branches</h3>
				<p><i class="fa fa-code-commit"></i> All work combines in the dev branch</p>
				<p><i class="fa fa-code-commit"></i> After combining in dev, path is dev <i
						class="fa fa-arrow-alt-right"></i> test <i class="fa fa-arrow-alt-right"></i> master
					<br><span class="font-20">You may have a staging branch between test and master</span> </p>

				<p><i class="fa fa-code-commit"></i> Sync the test branch with dev branch via a Pull Request<br>
					<span class="font-20">It's a good habit
						and it provides accountability!</span>
				</p>

				<p><i class="fa fa-code-commit"></i> Conduct internal testing and/or user acceptance testing with test
					branch on a test server<br>
					<span class="font-20">Issues in this version can now be closed!</span></p>
			</section>

			<section>
				<h3><i class="fa fa-code-branch"></i> Moving Code through Core Branches (continued)</h3>
				<p><i class="fa fa-code-commit"></i> After the version available on test server is approved, the release
					can be merged with master and
					published to the production server
					<br><span class="font-20">A different distribution build may be required for
						production/master</span>
				</p>

				<p><i class="fa fa-code-commit"></i> Once version is promoted to master and published to production,
					that verison is public. Development
					cycles continue until project is complete! <i class="fas fa-glass-cheers"></i></p><br>


			</section>


			<section>
				<h2><i class="fa fa-info-square"></i> Summary</h2>
				<ol>
					<li><i class="fa fa-code-branch"></i> Use core branches; protect them </li>
					<li><i class="fa fa-clipboard"></i> Use issues to document and track tasks </li>
					<li><i class="fa fa-code-commit"></i> Develop in focused branches; commit often </li>
					<li><i class="fab fa-trello"></i> Use a Kanban board to track progress and status of issues</li>
					<li><i class="fa fa-code-merge"></i> Merge all work into dev via a Pull Request</li>
					<li><i class="fa fa-ellipsis-h"></i> Version and release work intelligently </li>
				</ol>

			</section>

		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				hash: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/highlight/highlight.js' },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
		</script>
</body>

</html>